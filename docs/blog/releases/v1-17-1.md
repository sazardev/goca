---
layout: doc
title: v1.17.1 Release Notes
titleTemplate: Releases | Goca Blog
description: Bug Fix - SQLite and other database drivers now properly configured during project initialization
---

<script setup>
import Badge from '../../.vitepress/theme/components/Badge.vue'
</script>

# v1.17.1 <Badge type="tip" text="Latest" />

**Release Date:** January 11, 2026

A critical bug fix release that resolves database driver configuration issues during project initialization.

---

## üêõ Bug Fixes

### Database Driver Configuration Fix

Fixed a critical bug where SQLite and other non-PostgreSQL databases were not properly configured during project initialization.

**Issue:** [#31 - Project Generation using SQLite use Postgres instead](https://github.com/sazardev/goca/issues/31)

#### Problem

When running `goca init --database sqlite` (or any database other than PostgreSQL), the generated project incorrectly included PostgreSQL dependencies and connection code:

```bash
goca init my-api --database sqlite
cd my-api
cat go.mod
# ‚ùå Showed: gorm.io/driver/postgres v1.5.4
# ‚úÖ Expected: gorm.io/driver/sqlite v1.5.4
```

#### Root Cause

The `createGoMod()` and `createMainGo()` functions in `cmd/init.go` had hardcoded PostgreSQL driver configuration:
- Base dependencies always included `gorm.io/driver/postgres`
- Main.go always imported `"gorm.io/driver/postgres"`
- Database connection always used `postgres.Open(dsn)`

#### Solution

Made database driver configuration conditional based on the `--database` flag:

1. **Updated `createGoMod()`**: Now properly switches between database drivers
   - PostgreSQL ‚Üí `gorm.io/driver/postgres v1.5.4`
   - MySQL ‚Üí `gorm.io/driver/mysql v1.5.2`
   - SQLite ‚Üí `gorm.io/driver/sqlite v1.5.4`
   - SQL Server ‚Üí `gorm.io/driver/sqlserver v1.5.2`
   - MongoDB ‚Üí `go.mongodb.org/mongo-driver v1.12.1`
   - DynamoDB ‚Üí AWS SDK v2 packages
   - Elasticsearch ‚Üí `github.com/elastic/go-elasticsearch/v8 v8.10.1`

2. **Updated `createMainGo()`**: Now generates database-specific imports and connection code
   - Correct driver import for each database type
   - Conditional GORM import (only for SQL databases)
   - Database-specific connection code (e.g., `sqlite.Open(dsn)` for SQLite)

#### Impact

- **Before**: Users could not successfully initialize projects with SQLite, MySQL, or other non-PostgreSQL databases
- **After**: All 8 supported database types now work correctly

---

## ‚úÖ Verified Database Support

All database types have been tested and verified to generate correct configuration:

| Database            | Driver Package                           | Status    |
| ------------------- | ---------------------------------------- | --------- |
| **PostgreSQL**      | `gorm.io/driver/postgres`                | ‚úÖ Working |
| **PostgreSQL JSON** | `gorm.io/driver/postgres`                | ‚úÖ Working |
| **MySQL**           | `gorm.io/driver/mysql`                   | ‚úÖ Working |
| **SQLite**          | `gorm.io/driver/sqlite`                  | ‚úÖ Fixed   |
| **SQL Server**      | `gorm.io/driver/sqlserver`               | ‚úÖ Fixed   |
| **MongoDB**         | `go.mongodb.org/mongo-driver`            | ‚úÖ Fixed   |
| **DynamoDB**        | AWS SDK v2                               | ‚úÖ Fixed   |
| **Elasticsearch**   | `github.com/elastic/go-elasticsearch/v8` | ‚úÖ Fixed   |

---

## üì¶ Example Usage

### SQLite Project

```bash
goca init my-api --module github.com/user/my-api --database sqlite
cd my-api
cat go.mod
```

**Generated go.mod (Correct)**:
```go
module github.com/user/my-api

go 1.21

require (
    github.com/gorilla/mux v1.8.0
    gorm.io/driver/sqlite v1.5.4
    gorm.io/gorm v1.25.5
)

require (
    github.com/jinzhu/inflection v1.0.0 // indirect
    github.com/jinzhu/now v1.1.5 // indirect
    github.com/mattn/go-sqlite3 v1.14.17 // indirect
)
```

**Generated main.go (Correct)**:
```go
import (
    // ...
    "gorm.io/driver/sqlite"
    "gorm.io/gorm"
)

func connectToDatabase(cfg *config.Config) (*gorm.DB, error) {
    dsn := cfg.GetDatabaseURL()
    // ...
    db, err := gorm.Open(sqlite.Open(dsn), &gorm.Config{})
    // ...
}
```

### MySQL Project

```bash
goca init my-api --module github.com/user/my-api --database mysql
```

**Generated dependencies**:
- `gorm.io/driver/mysql v1.5.2`
- `github.com/go-sql-driver/mysql` (transitive)

---

## üîß Technical Details

### Files Modified

- **`cmd/init.go`**:
  - `createGoMod()` - Made database dependencies conditional
  - `createMainGo()` - Made driver imports and connection code conditional
  - Function signature updated to pass database type correctly

### Code Changes

```go
// Before (Bug)
baseDeps := `github.com/gorilla/mux v1.8.0
    gorm.io/gorm v1.25.5
    gorm.io/driver/postgres v1.5.4` // ‚ùå Always PostgreSQL

// After (Fixed)
baseDeps := `github.com/gorilla/mux v1.8.0`

switch database {
case DBSQLite:
    baseDeps += `
    gorm.io/gorm v1.25.5
    gorm.io/driver/sqlite v1.5.4` // ‚úÖ Correct driver
// ... other cases
}
```

---

## üìñ Migration Guide

### For Affected Users

If you created a project with `--database sqlite` (or other non-PostgreSQL) using v1.17.0 or earlier:

1. **Update Goca**:
   ```bash
   go install github.com/sazardev/goca@latest
   ```

2. **Recreate Project** (Recommended):
   ```bash
   goca init my-api --module github.com/user/my-api --database sqlite
   ```

3. **Or Manual Fix** (If you have custom code):
   
   Update `go.mod`:
   ```bash
   # Remove PostgreSQL driver
   go get gorm.io/driver/postgres@none
   
   # Add correct driver (e.g., SQLite)
   go get gorm.io/driver/sqlite@latest
   
   # Clean up
   go mod tidy
   ```
   
   Update `cmd/server/main.go`:
   ```go
   // Change import
   - "gorm.io/driver/postgres"
   + "gorm.io/driver/sqlite"
   
   // Change connection
   - db, err := gorm.Open(postgres.Open(dsn), &gorm.Config{})
   + db, err := gorm.Open(sqlite.Open(dsn), &gorm.Config{})
   ```

---

## üôè Contributors

Special thanks to [@domharvest](https://github.com/domharvest) for reporting this issue!

---

## üì• Installation

```bash
# Go Install
go install github.com/sazardev/goca@v1.17.1

# Homebrew (macOS/Linux)
brew update
brew upgrade goca

# From Source
git clone https://github.com/sazardev/goca.git
cd goca
git checkout v1.17.1
go build -o goca .
```

---

## üîó Links

- [GitHub Release](https://github.com/sazardev/goca/releases/tag/v1.17.1)
- [Issue #31](https://github.com/sazardev/goca/issues/31)
- [Full Changelog](https://github.com/sazardev/goca/blob/main/CHANGELOG.md)
- [Documentation](https://sazardev.github.io/goca/)

---

<style scoped>
.custom-block.tip {
  border-left-color: #42b983;
}
</style>
